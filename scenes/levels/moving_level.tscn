[gd_scene load_steps=11 format=3 uid="uid://dc2gstuysvbw5"]

[ext_resource type="PackedScene" uid="uid://qik6lcaqekwf" path="res://scenes/managers/viewport_manager.tscn" id="1_7g605"]
[ext_resource type="Script" uid="uid://bwe2vxf3k3ib0" path="res://scripts/GameManager.gd" id="2_85aqy"]
[ext_resource type="Script" uid="uid://cldm2bo1qftlf" path="res://scripts/TileManager.gd" id="3_l4eas"]
[ext_resource type="PackedScene" uid="uid://pu2rreyu3h07" path="res://scenes/tiles/moving_tile.tscn" id="5_ae6pk"]
[ext_resource type="PackedScene" uid="uid://bdbaus0a0yg6g" path="res://scenes/tiles/FGTile.tscn" id="5_rxndl"]
[ext_resource type="PackedScene" uid="uid://8rycyialk58q" path="res://scenes/components/player.tscn" id="6_luxvi"]
[ext_resource type="Script" path="res://scripts/move_goal.gd" id="7_7g605"]
[ext_resource type="PackedScene" uid="uid://caun6mhxmr543" path="res://scenes/tiles/tile.tscn" id="7_p3iiq"]
[ext_resource type="PackedScene" uid="uid://b8nhwpsguopu5" path="res://scenes/components/move_goal.tscn" id="7_tof08"]
[ext_resource type="PackedScene" uid="uid://do48gbwqu8jmc" path="res://scenes/tiles/button.tscn" id="9_tof08"]

[node name="GravityLevel" type="Node"]

[node name="ViewportManager" parent="." instance=ExtResource("1_7g605")]

[node name="GameManager" type="Node" parent="." node_paths=PackedStringArray("endTile")]
script = ExtResource("2_85aqy")
endTile = NodePath("TileManager/ForegroundTile3")

[node name="TileManager" type="Node" parent="GameManager"]
script = ExtResource("3_l4eas")

[node name="MovingTile" parent="GameManager/TileManager" node_paths=PackedStringArray("goals", "goal") instance=ExtResource("5_ae6pk")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0, 1)
goals = [NodePath("../MoveGoal2"), NodePath("../MoveGoal3")]
goal = NodePath("../MoveGoal")
activation_cond = 2

[node name="MoveGoal" type="Marker3D" parent="GameManager/TileManager" node_paths=PackedStringArray("neighbors")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0, 1)
script = ExtResource("7_7g605")
neighbors = [NodePath("../Tile5")]

[node name="MoveGoal2" parent="GameManager/TileManager" node_paths=PackedStringArray("neighbors", "gravity_path") instance=ExtResource("7_tof08")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1)
neighbors = [NodePath("../Tile")]
gravity_path = NodePath("../ForegroundTile")

[node name="MoveGoal3" parent="GameManager/TileManager" instance=ExtResource("7_tof08")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, -2, 1)

[node name="ForegroundTile" parent="GameManager/TileManager" node_paths=PackedStringArray("neighbors", "gravity_path") instance=ExtResource("5_rxndl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5, 1)
neighbors = [NodePath("../ForegroundTile2")]
gravity_path = NodePath("../MovingTile")

[node name="ForegroundTile2" parent="GameManager/TileManager" node_paths=PackedStringArray("neighbors") instance=ExtResource("5_rxndl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 5, 0)
neighbors = [NodePath("../ForegroundTile"), NodePath("../ForegroundTile3")]

[node name="ForegroundTile3" parent="GameManager/TileManager" node_paths=PackedStringArray("neighbors") instance=ExtResource("5_rxndl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 5, 0)
neighbors = [NodePath("../ForegroundTile2")]

[node name="Tile" parent="GameManager/TileManager" node_paths=PackedStringArray("neighbors") instance=ExtResource("7_p3iiq")]
neighbors = [NodePath("../Tile2"), NodePath("../MovingTile")]

[node name="Tile2" parent="GameManager/TileManager" node_paths=PackedStringArray("neighbors") instance=ExtResource("7_p3iiq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0)
neighbors = [NodePath("../Tile"), NodePath("../Tile3")]

[node name="Tile3" parent="GameManager/TileManager" node_paths=PackedStringArray("neighbors") instance=ExtResource("7_p3iiq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 0, 0)
neighbors = [NodePath("../Tile2"), NodePath("../Tile4")]

[node name="Tile4" parent="GameManager/TileManager" node_paths=PackedStringArray("neighbors") instance=ExtResource("7_p3iiq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0, 0)
neighbors = [NodePath("../Tile3"), NodePath("../Tile5")]

[node name="Tile5" parent="GameManager/TileManager" node_paths=PackedStringArray("neighbors") instance=ExtResource("7_p3iiq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0, 0)
neighbors = [NodePath("../Tile4"), NodePath("../MovingTile")]

[node name="Button" parent="GameManager/TileManager" node_paths=PackedStringArray("target_tile", "move_tile", "gameManager") instance=ExtResource("9_tof08")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 1, -1)
target_tile = NodePath("../Tile4")
move_tile = NodePath("../MovingTile")
buttonType = 1
gameManager = NodePath("../..")

[node name="Player" parent="GameManager" node_paths=PackedStringArray("current") instance=ExtResource("6_luxvi")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)
current = NodePath("../TileManager/Tile")
